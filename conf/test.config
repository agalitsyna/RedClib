params {
    config_profile_name        = 'Test profile'
    config_profile_description = 'Minimal test dataset to check pipeline function'

    // Limit resources so that this can run CI
    max_cpus   = 10
    max_memory = '12.GB'
    max_time   = '6.h'

    publish_dir_mode = 'copy'

    // Input data
    input = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/samplesheet.csv'                                //required
    chunksize = 5000                                           //optional

    genome {
        assembly = 'hg38'                                      //required
        auto_download_genome = false                           //optional
        chromsizes = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/genome/hg38.reduced.chrom.sizes'  //optional
        index_prefix = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/genome/hg38'                    //optional
        fasta = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/genome/hg38.fa'                        //optional
        genes_gtf = 'ftp://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_19/gencode.v19.chr_patch_hapl_scaff.annotation.gtf.gz' //required
        rna_annotation_suffix = 'gencode.v19'                 //optional
        restricted {                                           // optional, might be incomplete list:
            DpnII   = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/genome/hg38.DpnII.bed'
            HindIII = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/genome/hg38.HindIII.bed'
            MmeI    = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/genome/hg38.MmeI.bed'
        }
    }

    check_restriction = true
    protocol {
        renzymes = ['DpnII', 'HindIII', 'MmeI']
    }

    dedup_crop = 50
    trimmomatic_params = "SLIDINGWINDOW:5:26 MINLEN:0"

    // Scheme of oligos mapping:
    oligos {
        bridge_forward {
            file = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/oligos/br_37_for.fasta'
            n_oligos = 1
            apply_to = [1, 2]
            right_allowed_shift = 14
            left_allowed_shift = -6
            mismateches_allowed = 1
            expected_length = 20
        }
        bridge_reverse {
            file = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/oligos/br_37_rev.fasta'
            n_oligos = 1
            apply_to = [1, 2]
            right_allowed_shift = -14 // From the end of read
            left_allowed_shift = -6
            mismateches_allowed = 1
            expected_length = 20
        }
        ggg {
            file = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/oligos/ggg.fasta'
            n_oligos = 1
            apply_to = [2]
            right_allowed_shift = 3 // For the start of read
            left_allowed_shift = 0
            mismateches_allowed = 0
            expected_length = 3
        }
        adaptor_forward {
            file = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/oligos/for_20.fasta'
            n_oligos = 2
            apply_to = [1, 2]
            right_allowed_shift = -14
            left_allowed_shift = 0
            mismateches_allowed = 1
            expected_length = 20
        }
        adaptor_reverse {
            file = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/oligos/rev_20.fasta'
            n_oligos = 2
            apply_to = [1, 2]
            right_allowed_shift = -14
            left_allowed_shift = 0
            mismateches_allowed = 1
            expected_length = 20
        }
        adaptor_reverse_short {
            file = '/home/agalicina/soft/sandbox/RedClib_dsl2_test/data/oligos/rev_20.fasta'
            n_oligos = 2
            apply_to = [1]
            right_allowed_shift = -14
            left_allowed_shift = 0
            mismateches_allowed = 1
            expected_length = 16
        }
    }

    //modules {
    //    'prepare_genome' {
    //        publish_files   = ['log':'log']
    //    }
    //    'hisat2_align' {
    //        args            = '--met-stderr --new-summary --dta'
    //        publish_files   = ['log':'log']
    //    }
    //}

}